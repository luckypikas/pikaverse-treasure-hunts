<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Multi-Door Portal â€” Optimized (Progression Links)</title>
<style>
  :root{
    --bg-gradient: linear-gradient(180deg,#06131f,#020812);
    --accent: #66c2ff;
    --accent-2: #7ad3ff;
    --muted: #cfeeff;
    --glass: rgba(255,255,255,0.04);
    --safe: #8ef0c2;
    --danger: #ff7b7b;
    --radius: 14px;
  }

  html,body{height:100%;margin:0;font-family:Inter,system-ui, -apple-system, "Segoe UI", Roboto, Arial; background:var(--bg-gradient); color:var(--muted); -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;}
  .wrap{min-height:100%;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;padding:20px 18px 48px;box-sizing:border-box;}

  header{width:100%;max-width:980px;margin:18px 0 6px;display:flex;align-items:center;justify-content:space-between;gap:12px}
  .title {font-size:20px;color:var(--accent);font-weight:700;letter-spacing:0.2px}
  .subtitle {font-size:13px;color:#bfeaff}

  main.card {width:100%;max-width:980px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.22)); border-radius:var(--radius); padding:18px; box-shadow:0 10px 40px rgba(0,0,0,0.6); border:1px solid rgba(255,255,255,0.03); margin-top:8px;box-sizing:border-box;}

  .lead {font-size:15px;margin:0 0 12px;color:#dff6ff}
  .lead small{display:block;color:#9fd6ea;font-size:12px;margin-top:6px}

  /* Responsive door grid: 2 cols on narrow, 3 on medium, 4 on wide */
  .doorGrid {
    display:grid;
    gap:14px;
    grid-template-columns: repeat(2,1fr);
  }
  @media(min-width:600px){ .doorGrid{ grid-template-columns: repeat(3,1fr); } }
  @media(min-width:980px){ .doorGrid{ grid-template-columns: repeat(4,1fr); } }

  /* Door style (large tap target) */
  .door {
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.2));
    border-radius:12px;
    min-height:120px;
    display:flex;
    align-items:center;
    justify-content:center;
    cursor:pointer;
    user-select:none;
    -webkit-tap-highlight-color: transparent;
    border:2px solid rgba(255,255,255,0.03);
    box-shadow: 0 6px 20px rgba(0,0,0,0.6), inset 0 0 22px rgba(0,0,0,0.35);
    transition: transform 180ms cubic-bezier(.2,.9,.3,1), box-shadow 200ms;
    font-size:28px;
    color:var(--muted);
    font-weight:700;
    padding:12px;
    text-align:center;
  }
  .door:active { transform: translateY(2px); }
  .door:focus { outline: none; box-shadow: 0 0 0 6px rgba(102,194,255,0.12), 0 10px 30px rgba(0,0,0,0.6); transform: translateY(-6px) scale(1.02); }

  .doorLabel { display:block; font-size:12px; color:#bfeaff; margin-top:8px; font-weight:600; }

  /* hover/tap effect */
  .door:hover { transform: translateY(-6px); box-shadow: 0 18px 32px rgba(0,0,0,0.6), inset 0 0 40px rgba(0,0,0,0.4); }

  /* Selected / outcome states */
  .resultBox { margin-top:18px; display:none; padding:14px; border-radius:10px; background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.3)); border:1px solid rgba(255,255,255,0.03); box-shadow: 0 10px 30px rgba(0,0,0,0.6); }
  .resultText { font-size:16px; color:#e8fbff; line-height:1.4; }
  .resultActions { margin-top:12px; display:flex; gap:10px; flex-wrap:wrap; }

  .btn {
    appearance:none;border:0;padding:10px 14px;border-radius:10px;cursor:pointer;font-weight:700;font-size:15px;
    transition: transform 120ms ease, box-shadow 140ms ease; text-decoration:none; display:inline-flex; align-items:center; gap:8px;
  }
  .btn:active { transform: translateY(2px); }

  .btn-primary { background: linear-gradient(90deg,var(--accent),var(--accent-2)); color:#011827; box-shadow:0 10px 30px rgba(90,170,255,0.14); }
  .btn-secondary { background: rgba(255,255,255,0.03); color:var(--muted); border:1px solid rgba(255,255,255,0.04); }
  .btn-penalty { background: linear-gradient(90deg,#ffb3b3,#ff7b7b); color:#200101; box-shadow:0 10px 30px rgba(255,110,110,0.12); }

  /* small helper row */
  .meta { display:flex; gap:8px; align-items:center; justify-content:space-between; margin-top:12px; color:#9fd6ea; font-size:13px; }
  .meta a{ color:var(--accent); text-decoration:underline; }

  /* gentle appear animation */
  .fadeIn { animation: fadeIn 420ms ease both; }
  @keyframes fadeIn { from { opacity:0; transform: translateY(6px);} to { opacity:1; transform:none; } }

  /* accessibility helper */
  .sr-only { position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0 0 0 0); white-space:nowrap; border:0; }

  /* footer small */
  footer { margin-top:18px; font-size:12px; color:#9fd6ea; text-align:center; }

</style>
</head>
<body>
  <div class="wrap">
    <header>
      <div>
        <div class="title">ðŸšª Multi-Door Portal â€” Optimized</div>
        <div class="subtitle">Tap a door to choose. One door leads forward â€” others may loop, punish, or be empty.</div>
      </div>
      <div class="meta" aria-hidden="false">
        <div>Touch-friendly â€¢ Mobile optimized</div>
        <div><a href="/mnt/data/matchpairgame.pdf" target="_blank" rel="noopener">Resource PDF</a></div>
      </div>
    </header>

    <main class="card" role="main" aria-labelledby="portal-heading">
      <h2 id="portal-heading" class="lead">Choose carefully â€” the correct door will reveal a progression link.</h2>
      <small class="lead"><small>Keyboard: Use Tab to focus a door, press Enter/Space to pick. Press Escape to return.</small></small>

      <!-- Doors grid -->
      <div class="doorGrid" id="doorGrid" role="list">
        <!-- Doors rendered here -->
        <!-- Example usage: data-outcome="correct" | "penalty" | "loop" | "empty" -->
        <div role="listitem">
          <button class="door" data-index="1" data-outcome="loop" aria-label="Door 1 â€” possible loop">
            <div>
              <div style="font-size:34px">1</div>
              <span class="doorLabel">Old Oak</span>
            </div>
          </button>
        </div>

        <div role="listitem">
          <button class="door" data-index="2" data-outcome="penalty" aria-label="Door 2 â€” may trigger penalty">
            <div>
              <div style="font-size:34px">2</div>
              <span class="doorLabel">Rusted Gate</span>
            </div>
          </button>
        </div>

        <div role="listitem">
          <button class="door" data-index="3" data-outcome="correct" aria-label="Door 3 â€” secret true path">
            <div>
              <div style="font-size:34px">3</div>
              <span class="doorLabel">Bright Arch</span>
            </div>
          </button>
        </div>

        <div role="listitem">
          <button class="door" data-index="4" data-outcome="empty" aria-label="Door 4 â€” empty room">
            <div>
              <div style="font-size:34px">4</div>
              <span class="doorLabel">Dusty Hall</span>
            </div>
          </button>
        </div>

        <div role="listitem">
          <button class="door" data-index="5" data-outcome="loop" aria-label="Door 5 â€” possible loop">
            <div>
              <div style="font-size:34px">5</div>
              <span class="doorLabel">Hidden Nook</span>
            </div>
          </button>
        </div>

        <div role="listitem">
          <button class="door" data-index="6" data-outcome="empty" aria-label="Door 6 â€” empty room">
            <div>
              <div style="font-size:34px">6</div>
              <span class="doorLabel">Quiet Room</span>
            </div>
          </button>
        </div>
      </div>

      <!-- Result area -->
      <div id="result" class="resultBox" role="status" aria-live="polite"></div>

      <div style="display:flex;gap:12px;flex-wrap:wrap;margin-top:16px;align-items:center;justify-content:center">
        <a id="portalLink" class="btn btn-primary" href="next-chamber.html" style="display:none" aria-hidden="true">ENTER PORTAL â†’</a>
        <a id="penaltyLink" class="btn btn-penalty" href="setback-room.html" style="display:none" aria-hidden="true">SETBACK â†’</a>
        <button id="tryAgainBtn" class="btn btn-secondary" style="display:none" aria-hidden="true">Try Another Door</button>
      </div>

      <div class="meta" style="margin-top:14px">
        <div>Hint: Look for the warm glow (or a clue from prior puzzles).</div>
        <div><a href="hub.html">Return to Hub</a></div>
      </div>
    </main>

    <footer>Need to change outcomes? Edit <code>data-outcome</code> attribute on each door.</footer>
  </div>

<script>
(function(){
  // Configurable target URLs (change these to your real pages)
  const CORRECT_URL = 'next-chamber.html';
  const PENALTY_URL = 'setback-room.html';
  const HUB_URL = 'hub.html';

  const doorGrid = document.getElementById('doorGrid');
  const result = document.getElementById('result');
  const portalLink = document.getElementById('portalLink');
  const penaltyLink = document.getElementById('penaltyLink');
  const tryAgainBtn = document.getElementById('tryAgainBtn');

  // Announce helper (for screen readers)
  function announce(text) {
    result.textContent = text;
  }

  // Reset UI state
  function resetResult() {
    result.style.display = 'none';
    portalLink.style.display = 'none'; portalLink.setAttribute('aria-hidden','true');
    penaltyLink.style.display = 'none'; penaltyLink.setAttribute('aria-hidden','true');
    tryAgainBtn.style.display = 'none'; tryAgainBtn.setAttribute('aria-hidden','true');
    // clear result text
    result.innerHTML = '';
  }

  // Handle a selected door
  function handleDoor(btn) {
    const outcome = btn.getAttribute('data-outcome') || 'empty';
    // visual focus / subtle animation
    btn.classList.add('fadeIn');
    // show result
    resetResult();
    result.style.display = 'block';
    result.classList.add('fadeIn');

    if (outcome === 'correct') {
      // show progression link
      result.innerHTML = '<div class="resultText">âœ¨ Correct! You found the true path forward.</div>';
      portalLink.href = CORRECT_URL;
      portalLink.style.display = 'inline-flex'; portalLink.removeAttribute('aria-hidden');
      announce('Correct door chosen. Portal unlocked.');
    } else if (outcome === 'penalty') {
      result.innerHTML = '<div class="resultText">ðŸ’€ Trap triggered! You are redirected to a setback.</div>';
      penaltyLink.href = PENALTY_URL;
      penaltyLink.style.display = 'inline-flex'; penaltyLink.removeAttribute('aria-hidden');
      announce('Penalty door chosen. Setback path available.');
    } else if (outcome === 'loop') {
      result.innerHTML = '<div class="resultText">ðŸŒ€ This door loops back. Try another door.</div>';
      tryAgainBtn.style.display = 'inline-flex'; tryAgainBtn.removeAttribute('aria-hidden');
      announce('Looping door. Please try another door.');
    } else { // empty
      result.innerHTML = '<div class="resultText">ðŸšª Empty room. Nothing here.</div>';
      tryAgainBtn.style.display = 'inline-flex'; tryAgainBtn.removeAttribute('aria-hidden');
      announce('Empty room. Try another door.');
    }

    // Focus first available action for keyboard users
    setTimeout(() => {
      if (portalLink.style.display !== 'none') portalLink.focus();
      else if (penaltyLink.style.display !== 'none') penaltyLink.focus();
      else tryAgainBtn.focus();
    }, 120);
  }

  // Add event listeners to all doors (supports keyboard)
  doorGrid.querySelectorAll('.door').forEach(btn => {
    btn.addEventListener('click', () => handleDoor(btn));
    btn.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        handleDoor(btn);
      }
    });
  });

  // Try again resets the result so player can pick again
  tryAgainBtn.addEventListener('click', () => {
    resetResult();
    // set focus back to first door
    const first = doorGrid.querySelector('.door');
    if (first) first.focus();
  });

  // Escape key returns to hub
  window.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') location.href = HUB_URL;
  });

  // Initialize ARIA friendly state
  resetResult();

  // Expose a small API for programmatic control (optional)
  window.portalMultiDoor = {
    setOutcome: (index, outcome) => {
      const btn = doorGrid.querySelector(`.door[data-index="${index}"]`);
      if (btn) btn.setAttribute('data-outcome', outcome);
    },
    unlockDoor: (index) => {
      const btn = doorGrid.querySelector(`.door[data-index="${index}"]`);
      if (btn) btn.setAttribute('data-outcome', 'correct');
    }
  };
})();
</script>
</body>
</html>
